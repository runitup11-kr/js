


console.log("1 [동기] 메인 스레드 시작");

//1 일반 태스크 큐 (가장 낮은 우선 순위)
// setTimeout을 하면 webAPI로 넘어가서 3초 카운트
// 그리고 태스크 큐에 값을 보냄
setTimeout(() =>{
    console.log("2.[태스크 큐] setTimeout 콜백 실행 ")
},3000);

//2 마이크로 태스크 큐(프라미스 - 높은 우선순위) // 태스크 큐 보다 우선 순위 높음 
// 마이크로 태스크 큐가 먼저 실행

const argPromise = new Promise((resolve, reject) =>{
    console.log("3. [동기] 프라미스 내부 로직" );
    resolve("성공!");
});

argPromise.then((result) =>{
    console.log(`4.[마이크로 태스크 큐].then() 콜백 실행 ${result} 완료`);
});

console.log("5.[동기] 메인 스레드 종료");

// 동기 코드를 우선 실행함
// 콜 스택에 1번 3번 5번이 들어갔다 즉시 실행
// 2번은 setTimeOut -> 비동기 코드가 실행되면 webAPI로 보내서 브라우저가 3초 카운트를 셈
// 그리고 태스크 큐에다가 값을 대기 시킴
// 4번은 성공 값을 같이 가지고 마이크로 태스크 큐에 보내서 대기 시킴
// 마이크로 태스크 큐가 태스크 큐 보다 순위가 앞이기 때문에
// 마이크로 태스크 큐의 성공값 / 성공 했을때 실행되는 then값이 스택에 올라가서 실행됨
// 2번 태스크 큐에 대기하고있는 값은 이벤트 루프가 콜스택을 감시하면서
// 전부 비워져있다?? 마지막으로 2번 값을 실행 시킴
// 실행 결과 1,3,5,4,2
