<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‹¬í”Œ ê°€ê³„ë¶€</title>
    <style>
        body { background: #f4f7f6; font-family: sans-serif; padding: 20px; }
        .container { max-width: 400px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        .input-group { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        input { padding: 12px; border: 1px solid #ddd; border-radius: 8px; }
        button { padding: 12px; background: #27ae60; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .item-list { list-style: none; padding: 0; }
        .item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; }
        .total { margin-top: 20px; text-align: right; font-size: 1.2rem; font-weight: bold; color: #e67e22; }
        .delete-btn { color: #ff4757; cursor: pointer; margin-left: 10px; border: none; background: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’¸ ê°€ê³„ë¶€</h1>
        <div class="input-group">
            <input type="text" id="itemName" placeholder="í•­ëª© (ì˜ˆ: ì¹˜í‚¨)">
            <input type="number" id="itemAmount" placeholder="ê¸ˆì•¡ (ì˜ˆ: 20000)">
            <button id="addBtn">ì§€ì¶œ ê¸°ë¡</button>
        </div>
        
        <ul id="historyList" class="item-list"></ul>
        
        <div class="total">ì´ ì§€ì¶œ: <span id="totalAmount">0</span>ì›</div>
    </div>

    <script>
        const moneyApp = {
            history : [],

            init(){
                //1. ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
                this.load();
                //2. ë²„íŠ¼ í´ë¦­ ì‹œ ì¶”ê°€ í•¨ìˆ˜ ì‹¤í–‰ë˜ê²Œ ì—°ê²°
                document.getElementById('addBtn').addEventListener('click',() => this.addMoney());
                //3. í™”ë©´ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
                this.render();

            },
            addMoney() {
                //1. ì…ë ¥ì°½ ë‘ê°œ ê°€ì ¸ì˜¤ê¸°
                const name = document.getElementById('itemName').value;
                const amountStr = document.getElementById('itemAmount').value;
                if(name === '' || amountStr === ''){
                    alert("ê¸°ë¡ì„ ëª¨ë‘ ì ì–´ì£¼ì„¸ìš”!")
                    return;
                }
                //2. ìˆ«ìë¡œ ë°”ê¾¸ê¸°
                const amount = parseInt(amountStr);

                //3. ê°ì²´ ë§Œë“¤ê¸°
                const newItem = {
                    id: Date.now(),
                    name: name,
                    amount: amount
                };
                
                //4. ê°ì²´ì— ë„£ê¸°
                this.history.push(newItem)

                //5. ì €ì¥í•˜ê³  ë‹¤ì‹œ í™”ë©´ ì¶œë ¥ / ì…ë ¥ì°½ ë¹„ìš°ê¸°
                this.save();
                this.render();
                document.getElementById('itemName').value = '';
                document.getElementById('itemAmount').value = '';
            },
            render() {
                const list = document.getElementById('historyList');
                const totalDisplay = document.getElementById('totalAmount');
                //1. ëª©ë¡ ê·¸ë¦¬ê¸° (mapì‚¬ìš©)

                list.innerHTML = this.history.map(item =>`
                <li class="item">
                    <span>${item.name}</span>
                    <span>${item.amount}ì›</span>
                    <button class="delete-btn" onclick="moneyApp.delete(${item.id})">ì‚­ì œ</button>
                </li>
                `).join('');

                //2. ì´ì•¡ ê³„ì‚°í•˜ê¸° (í•µì‹¬)
                let total = 0;
                this.history.forEach(item => total += item.amount);

                //3. ì´ì•¡ í™”ë©´ì— í‘œì‹œí•˜ê¸°
                totalDisplay.textContent = total;
            },
            save() {
            //1. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê¸°
               localStorage.setItem('moneyData',JSON.stringify(this.history));
            },

            load() {
            //2. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¤ê¸°
            const saved = localStorage.getItem('moneyData');
            //   ë§Œì•½ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ê¸€ìë¥¼ ë‹¤ì‹œ ê°ì²´ ë°°ì—´ë¡œ ì¡°ë¦½í•´ì„œ this.historyì— ë„£ì–´ì£¼ê¸°
            if(saved){
                this.history = JSON.parse(saved);
            }
                
           },
           
           delete(id){
           //3. filterë¥¼ ì¨ì„œ í•´ë‹¹ idë§Œ ì œì™¸í•œ ìƒˆ ë°°ì—´ ë§Œë“¤ê¸°
           this.history = this.history.filter(item => item.id !== id);
           //4. ì €ì¥í•˜ê³  í™”ë©´ ì¶œë ¥!
            this.save();
            this.render();

           }

        
        }
        //í”„ë¡œê·¸ë¨ ì‹œì‘
        moneyApp.init();
    </script>
</body>
</html>
