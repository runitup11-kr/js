<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <style>
        /* ========== 기본 스타일 ========== */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            padding: 40px 20px;
        }

        /* ========== 컨테이너 ========== */
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }

        /* ========== 타이틀 ========== */
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        /* ========== 입력 영역 ========== */
        .input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #todoInput {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        #todoInput:focus {
            border-color: #667eea;
        }

        #addBtn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        #addBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        /* ========== 필터 버튼 ========== */
        .filter-area {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn:hover {
            border-color: #667eea;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* ========== 할 일 목록 ========== */
        #todoList {
            list-style: none;
        }

        .todo-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .todo-item:hover {
            background: #e9ecef;
        }

        .todo-item.completed {
            opacity: 0.6;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #888;
        }

        /* 체크박스 */
        .todo-checkbox {
            width: 22px;
            height: 22px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: #667eea;
        }

        /* 할 일 텍스트 */
        .todo-text {
            flex: 1;
            font-size: 1rem;
            color: #333;
        }

        /* 삭제 버튼 */
        .delete-btn {
            padding: 8px 15px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .todo-item:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: #ee5a5a;
        }

        /* ========== 통계 영역 ========== */
        .stats {
            text-align: center;
            color: #888;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        /* ========== 빈 상태 메시지 ========== */
        .empty-message {
            text-align: center;
            color: #aaa;
            padding: 40px;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>To-Do List</h1>

        <!-- 입력 영역 -->
        <div class="input-area">
            <input type="text" id="todoInput" placeholder="할 일을 입력하세요...">
            <button id="addBtn">추가</button>
        </div>

        <!-- 필터 버튼 -->
        <div class="filter-area">
            <button class="filter-btn active" data-filter="all">전체</button>
            <button class="filter-btn" data-filter="active">진행중</button>
            <button class="filter-btn" data-filter="completed">완료</button>
        </div>

        <!-- 할 일 목록 -->
        <ul id="todoList"></ul>

        <!-- 통계 -->
        <div class="stats" id="stats"></div>
    </div>

    <script>
        /*
         * ╔══════════════════════════════════════════════════════════════════╗
         * ║                    To-Do List 실습                               ║
         * ╠══════════════════════════════════════════════════════════════════╣
         * ║  학습 목표:                                                       ║
         * ║  1. 배열(Array)을 활용한 데이터 관리                              ║
         * ║  2. 배열 메서드 (push, filter, find, map)                         ║
         * ║  3. DOM 조작 (innerHTML, addEventListener)                        ║
         * ║  4. 이벤트 처리 (click, keypress)                                 ║
         * ║  5. 로컬 스토리지 (localStorage)                                  ║
         * ║  6. 템플릿 리터럴을 활용한 HTML 생성                              ║
         * ╚══════════════════════════════════════════════════════════════════╝
         */

        const todoApp = {
            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 1] 상태 변수 선언                                     │
             * │                                                             │
             * │  todos: 할 일 목록을 저장하는 배열                           │
             * │  - 각 할 일은 객체로 저장됩니다                              │
             * │  - 예: { id: 1, text: '공부하기', completed: false }         │
             * │                                                             │
             * │  currentFilter: 현재 필터 상태 ('all', 'active', 'completed')│
             * └─────────────────────────────────────────────────────────────┘
             */
            todos: [],              // 할 일 목록 배열
            currentFilter: 'all',   // 현재 필터 ('all', 'active', 'completed')


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [도우미] 앱 초기화 함수                                     │
             * │                                                             │
             * │  페이지 로드 시 실행됩니다.                                  │
             * │  1. 로컬 스토리지에서 데이터 불러오기                        │
             * │  2. 이벤트 리스너 등록                                       │
             * │  3. 화면 렌더링                                              │
             * └─────────────────────────────────────────────────────────────┘
             */
            init() {
                this.loadFromStorage();
                this.bindEvents();
                this.render();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 2] 이벤트 바인딩                                      │
             * │                                                             │
             * │  사용자 입력을 처리하기 위한 이벤트 리스너를 등록합니다.     │
             * │                                                             │
             * │  등록할 이벤트:                                              │
             * │  1. 추가 버튼 클릭 → addTodo() 호출                          │
             * │  2. 입력창에서 Enter 키 → addTodo() 호출                     │
             * │  3. 필터 버튼 클릭 → setFilter() 호출                        │
             * │  4. 체크박스 클릭 → toggleTodo() 호출                        │
             * │  5. 삭제 버튼 클릭 → deleteTodo() 호출                       │
             * └─────────────────────────────────────────────────────────────┘
             */
            bindEvents() {
                document.getElementById('addBtn').addEventListener('click',()=>{
                    this.addTodo();
                });
                /*
                 * TODO: 추가 버튼 클릭 이벤트
                 *
                 * 힌트:
                 *   document.getElementById('addBtn').addEventListener('click', () => {
                 *       this.addTodo();
                 *   });
                 */


                /*
                 * TODO: Enter 키 입력 이벤트
                 *
                 * 입력창에서 Enter 키를 누르면 할 일을 추가합니다.
                 *
                 * 힌트:
                 *   - 'keypress' 이벤트를 사용합니다
                 *   - e.key === 'Enter' 로 Enter 키인지 확인합니다
                 *
                 *   document.getElementById('todoInput').addEventListener('keypress', (e) => {
                 *       if (e.key === 'Enter') {
                 *           this.addTodo();
                 *       }
                 *   });
                 */
                    document.getElementById('todoInput').addEventListener('keypress',(e) =>{
                    if(e.key === 'Enter'){
                        this.addTodo();
                    }
                });

                /*
                 * TODO: 필터 버튼 클릭 이벤트 (이벤트 위임)
                 *
                 * 이벤트 위임이란?
                 *   - 각 버튼에 개별적으로 이벤트를 등록하는 대신,
                 *   - 부모 요소에 한 번만 등록하고, e.target으로 클릭된 요소를 확인합니다.
                 *
                 * 힌트:
                 *   document.querySelector('.filter-area').addEventListener('click', (e) => {
                 *       if (e.target.classList.contains('filter-btn')) {
                 *           this.setFilter(e.target.dataset.filter);
                 *       }
                 *   });
                 */
                document.querySelector('.filter-area').addEventListener('click',(e) =>{
                    if(e.target.classList.contains('filter-btn')){
                        this.setFilter(e.target.dataset.filter);
                    }
                });

                /*
                 * TODO: 할 일 목록 클릭 이벤트 (이벤트 위임)
                 *
                 * 체크박스 또는 삭제 버튼이 클릭되면 해당 작업을 수행합니다.
                 *
                 * 힌트:
                 *   - e.target.closest('.todo-item')로 클릭된 항목을 찾습니다
                 *   - item.dataset.id로 할 일의 ID를 가져옵니다
                 *   - parseInt()로 문자열을 숫자로 변환합니다
                 *
                 *   document.getElementById('todoList').addEventListener('click', (e) => {
                 *       const item = e.target.closest('.todo-item');
                 *       if (!item) return;
                 *
                 *       const id = parseInt(item.dataset.id);
                 *
                 *       if (e.target.classList.contains('todo-checkbox')) {
                 *           this.toggleTodo(id);
                 *       } else if (e.target.classList.contains('delete-btn')) {
                 *           this.deleteTodo(id);
                 *       }
                 *   });
                 */
                    document.getElementById('todoList').addEventListener('click',(e) =>{
                        const item = e.target.closest('.todo-item');
                        if(!item) return;

                        const id = parseInt(item.dataset.id);

                        if(e.target.classList.contains('todo-checkbox')){
                            this.toggleTodo(id);
                        }else if(e.target.classList.contains('delete-btn')){
                            this.deleteTodo(id);
                        }
                    });
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 3] 할 일 추가 함수                                    │
             * │                                                             │
             * │  입력창의 텍스트를 읽어서 새로운 할 일을 추가합니다.         │
             * │                                                             │
             * │  처리 순서:                                                  │
             * │  1. 입력창에서 텍스트 가져오기 (trim으로 앞뒤 공백 제거)     │
             * │  2. 빈 값이면 경고 메시지 표시                               │
             * │  3. 새 할 일 객체 생성 { id, text, completed }               │
             * │  4. todos 배열에 추가                                        │
             * │  5. 입력창 비우기 & 포커스                                   │
             * │  6. 저장 & 렌더링                                            │
             * └─────────────────────────────────────────────────────────────┘
             */
            addTodo() {
                // 입력창 요소 가져오기
                const input = document.getElementById('todoInput');

                /*
                 * TODO: 입력값 가져오기
                 *
                 * trim()은 문자열 앞뒤의 공백을 제거합니다.
                 * 예: "  안녕  ".trim() → "안녕"
                 *
                 * 힌트: const text = input.value.trim();
                 */
                const text = input.value.trim(); // TODO: 입력값 가져오기
                

                /*
                 * TODO: 빈 값 체크
                 *
                 * 텍스트가 비어있으면 경고창을 띄우고 함수를 종료합니다.
                 *
                 * 힌트:
                 *   if (text === '') {
                 *       alert('할 일을 입력해주세요!');
                 *       return;
                 *   }
                 */
                if(text === ''){
                    alert('할 일을 입력해주세요!!');
                    return;
                }

                /*
                 * TODO: 새 할 일 객체 생성
                 *
                 * 할 일 객체의 구조:
                 *   - id: 고유 식별자 (Date.now()로 현재 시간을 밀리초로 사용)
                 *   - text: 할 일 내용
                 *   - completed: 완료 여부 (처음엔 false)
                 *
                 * 힌트:
                 *   const newTodo = {
                 *       id: Date.now(),
                 *       text: text,
                 *       completed: false
                 *   };
                 */
                const newTodo = {
                    id: Date.now(),
                    text: text,
                    completed:false
                }; // TODO: 새 할 일 객체 생성


                /*
                 * TODO: 배열에 추가
                 *
                 * push() 메서드로 배열 끝에 요소를 추가합니다.
                 *
                 * 힌트: this.todos.push(newTodo);
                 */
                this.todos.push(newTodo);

                // 입력창 비우기 & 포커스 (완성되어 있습니다)
                input.value = '';
                input.focus();

                // 저장 & 렌더링 (완성되어 있습니다)
                this.saveToStorage();
                this.render();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 4] 완료 상태 토글 함수                                │
             * │                                                             │
             * │  체크박스를 클릭하면 완료 상태를 반전시킵니다.               │
             * │  (true → false, false → true)                               │
             * │                                                             │
             * │  처리 순서:                                                  │
             * │  1. id로 해당 할 일 찾기 (find 메서드 사용)                  │
             * │  2. completed 값 반전                                        │
             * │  3. 저장 & 렌더링                                            │
             * └─────────────────────────────────────────────────────────────┘
             */
            toggleTodo(id) {
                /*
                 * TODO: id로 할 일 찾기
                 *
                 * find() 메서드는 조건에 맞는 첫 번째 요소를 반환합니다.
                 *
                 * 예시:
                 *   const numbers = [1, 2, 3, 4, 5];
                 *   const found = numbers.find(n => n > 3);  // 결과: 4
                 *
                 * 힌트: const todo = this.todos.find(t => t.id === id);
                 */
                const todo = this.todos.find(t => t.id === id ); // TODO: find로 할 일 찾기


                /*
                 * TODO: 완료 상태 반전
                 *
                 * ! 연산자로 불린 값을 반전시킵니다.
                 * 예: !true → false, !false → true
                 *
                 * 힌트:
                 *   if (todo) {
                 *       todo.completed = !todo.completed;
                 *   }
                 */
                 if(todo){
                    todo.completed = !todo.completed;
                 }


                // 저장 & 렌더링 (완성되어 있습니다)
                this.saveToStorage();
                this.render();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 5] 할 일 삭제 함수                                    │
             * │                                                             │
             * │  삭제 버튼을 클릭하면 해당 할 일을 목록에서 제거합니다.      │
             * │                                                             │
             * │  filter() 메서드 설명:                                       │
             * │  - 조건에 맞는 요소만 모아서 새 배열을 반환합니다            │
             * │  - 원본 배열은 변경되지 않습니다                             │
             * │                                                             │
             * │  예시:                                                       │
             * │    const nums = [1, 2, 3, 4, 5];                             │
             * │    const filtered = nums.filter(n => n > 2);                 │
             * │    // 결과: [3, 4, 5]                                        │
             * └─────────────────────────────────────────────────────────────┘
             */
            deleteTodo(id) {
                /*
                 * TODO: 해당 id를 제외한 나머지만 필터링
                 *
                 * "id가 일치하지 않는 것만 남긴다" = "해당 id를 삭제한다"
                 *
                 * 힌트: this.todos = this.todos.filter(t => t.id !== id);
                 */
                this.todos = this.todos.filter(t => t.id !== id);

                // 저장 & 렌더링 (완성되어 있습니다)
                this.saveToStorage();
                this.render();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 6] 필터 설정 함수                                     │
             * │                                                             │
             * │  필터 버튼을 클릭하면 해당 필터를 적용합니다.                │
             * │  - 'all': 전체 보기                                          │
             * │  - 'active': 진행중인 것만 (completed가 false)               │
             * │  - 'completed': 완료된 것만 (completed가 true)               │
             * └─────────────────────────────────────────────────────────────┘
             */
            setFilter(filter) {
                /*
                 * TODO: 현재 필터 상태 변경
                 *
                 * 힌트: this.currentFilter = filter;
                 */
                this.currentFilter = filter;

                /*
                 * TODO: 필터 버튼 활성화 표시 변경
                 *
                 * classList.toggle(className, condition)
                 *   - condition이 true면 클래스 추가
                 *   - condition이 false면 클래스 제거
                 *
                 * 힌트:
                 *   document.querySelectorAll('.filter-btn').forEach(btn => {
                 *       btn.classList.toggle('active', btn.dataset.filter === filter);
                 *   });
                 */
                document.querySelectorAll('.filter-btn').forEach(btn =>{
                    btn.classList.toggle('active',btn.dataset.filter === filter);
                });

                // 렌더링 (완성되어 있습니다)
                this.render();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 7] 필터링된 목록 가져오기                             │
             * │                                                             │
             * │  현재 필터 상태에 따라 표시할 할 일 목록을 반환합니다.       │
             * └─────────────────────────────────────────────────────────────┘
             */
            getFilteredTodos() {
                /*
                 * TODO: 필터에 따라 다른 목록 반환
                 *
                 * switch문 또는 if문을 사용하세요.
                 *
                 * - 'active': completed가 false인 것만
                 * - 'completed': completed가 true인 것만
                 * - 'all' (기본): 전체 목록
                 *
                 * 힌트:
                 *   switch (this.currentFilter) {
                 *       case 'active':
                 *           return this.todos.filter(t => !t.completed);
                 *       case 'completed':
                 *           return this.todos.filter(t => t.completed);
                 *       default:
                 *           return this.todos;
                 *   }
                 */
                 switch (this.currentFilter){
                    case 'active':
                        return this.todos.filter(t => !t.completed);
                    case 'completed':
                        return this.todos.filter(t => t.completed);
                    default:
                        return this.todos;
                 }

                return this.todos; // TODO: 필터링 로직 구현
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 8] 화면 렌더링 함수                                   │
             * │                                                             │
             * │  todos 배열을 기반으로 HTML을 생성하여 화면에 표시합니다.    │
             * │                                                             │
             * │  map() 메서드 설명:                                          │
             * │  - 배열의 각 요소를 변환하여 새 배열을 반환합니다            │
             * │                                                             │
             * │  예시:                                                       │
             * │    const nums = [1, 2, 3];                                   │
             * │    const doubled = nums.map(n => n * 2);                     │
             * │    // 결과: [2, 4, 6]                                        │
             * └─────────────────────────────────────────────────────────────┘
             */
            render() {
                const list = document.getElementById('todoList');
                const filteredTodos = this.getFilteredTodos();

                /*
                 * TODO: 목록이 비어있으면 안내 메시지 표시
                 *
                 * 힌트:
                 *   if (filteredTodos.length === 0) {
                 *       list.innerHTML = '<li class="empty-message">할 일이 없습니다.</li>';
                 *   }
                 */
                if(filteredTodos.length === 0){
                    list.innerHTML = '<li class = "empty-message">할 일이 없습니다.</li>';
                    this.updateStats();
                    return;
                }

                /*
                 * TODO: 할 일 목록을 HTML로 변환하여 표시
                 *
                 * map()으로 각 todo 객체를 HTML 문자열로 변환합니다.
                 * join('')으로 배열을 하나의 문자열로 합칩니다.
                 *
                 * 템플릿 리터럴 설명:
                 *   - 백틱(`)으로 감싸서 여러 줄 문자열 작성 가능
                 *   - ${변수}로 변수 값을 삽입 가능
                 *   - ${조건 ? 'A' : 'B'}로 조건부 값 삽입 가능
                 *
                 * 힌트:
                 *   list.innerHTML = filteredTodos.map(todo => `
                 *       <li class="todo-item ${todo.completed ? 'completed' : ''}" data-id="${todo.id}">
                 *           <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''}>
                 *           <span class="todo-text">${todo.text}</span>
                 *           <button class="delete-btn">삭제</button>
                 *       </li>
                 *   `).join('');
                 */
                    list.innerHTML = filteredTodos.map(todo =>`
                    <li class="todo-item ${todo.completed ? 'completed': ''}" data-id ="${todo.id}">
                        <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''}
                        <span class="todo-text">${todo.text}</span>
                        <button class="delete-btn">삭제</button>
                    </li>
                    `).join('');

                // 통계 업데이트 (완성되어 있습니다)
                this.updateStats();
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [도우미] 통계 업데이트 함수 (완성되어 있습니다)             │
             * └─────────────────────────────────────────────────────────────┘
             */
            updateStats() {
                const total = this.todos.length;
                const completed = this.todos.filter(t => t.completed).length;
                const active = total - completed;

                document.getElementById('stats').textContent =
                    `전체: ${total}개 | 진행중: ${active}개 | 완료: ${completed}개`;
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 9] 로컬 스토리지 저장 함수                            │
             * │                                                             │
             * │  localStorage 설명:                                          │
             * │  - 브라우저에 데이터를 영구적으로 저장합니다                 │
             * │  - 문자열만 저장 가능 → JSON.stringify()로 변환 필요         │
             * │  - 페이지를 새로고침해도 데이터가 유지됩니다                 │
             * └─────────────────────────────────────────────────────────────┘
             */
            saveToStorage() {
                /*
                 * TODO: todos 배열을 로컬 스토리지에 저장
                 *
                 * JSON.stringify()는 자바스크립트 객체/배열을 문자열로 변환합니다.
                 * 예: [1, 2, 3] → "[1,2,3]"
                 *
                 * 힌트: localStorage.setItem('todos', JSON.stringify(this.todos));
                 */
                localStorage.setItem('todos', JSON.stringify(this.todos));
            },


            /*
             * ┌─────────────────────────────────────────────────────────────┐
             * │  [실습 10] 로컬 스토리지 불러오기 함수                       │
             * │                                                             │
             * │  페이지 로드 시 저장된 데이터를 불러옵니다.                  │
             * └─────────────────────────────────────────────────────────────┘
             */
            loadFromStorage() {
                /*
                 * TODO: 로컬 스토리지에서 데이터 불러오기
                 *
                 * localStorage.getItem()은 저장된 문자열을 반환합니다.
                 * 데이터가 없으면 null을 반환합니다.
                 *
                 * JSON.parse()는 문자열을 자바스크립트 객체/배열로 변환합니다.
                 * 예: "[1,2,3]" → [1, 2, 3]
                 *
                 * 힌트:
                 *   const saved = localStorage.getItem('todos');
                 *   if (saved) {
                 *       this.todos = JSON.parse(saved);
                 *   }
                 */
                const saved = localStorage.getItem('todos');
                if (saved){
                    this.todos = JSON.parse(saved);
                }
            }
        };


        // 앱 시작
        todoApp.init();
    </script>
</body>
</html>
